<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spel met scanvlak en feedback</title>

  <style>
    :root{
      --topbar-h: 150px;
      --fade-ms: 900ms;
    }

    body{
      margin:0;
      font-family: system-ui, Arial, sans-serif;
      background:#f6f7fb;
    }

    /* Bovenbalk */
    .topbar{
      position:fixed;
      top:0;
      left:0;
      right:0;
      height:var(--topbar-h);
      display:flex;
      align-items:center;
      gap:18px;
      padding:12px 18px;
      background:#ffffff;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      z-index:10;
    }

    /* goed2.gif dubbel zo groot */
    #goodAnim{
      height:132px;
      width:auto;
      display:none;
    }

    /* Correcte cijferblok */
    #correctWrap{
      display:none;
      align-items:center;
      height:132px;
    }

    .numberStage{
      position:relative;
      height:132px;
      min-width:140px;
      display:flex;
      align-items:center;
      justify-content:flex-start;
    }

    #correctNumber{
      font-size:76px;
      font-weight:900;
      line-height:1;
      padding-right:10px;
    }

    /* marbotic bovenop het cijfer, langzaam infaden */
    #marboticImg{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width:130px;
      height:auto;
      pointer-events:none;
      display:none;

      opacity:0;
      transition: opacity var(--fade-ms) ease;
    }

    #marboticImg.is-on{
      opacity:1;
    }

    /* magic bovenop alles */
    #magicAnim{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width:170px;
      height:170px;
      pointer-events:none;
      display:none;
    }

    /* Layout met scanvlak */
    .wrap{
      padding-top:calc(var(--topbar-h) + 18px);
      max-width:1100px;
      margin:0 auto;
      padding-left:18px;
      padding-right:18px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.4fr .6fr;
      gap:18px;
      align-items:start;
    }

    .scanvlak{
      background:#fff;
      border-radius:18px;
      padding:18px;
      box-shadow:0 10px 26px rgba(0,0,0,.06);
      min-height:420px;
      position:relative;
      overflow:hidden;
    }

    .scanTitle{
      font-size:18px;
      font-weight:700;
      margin:0 0 10px;
    }

    .scanBox{
      border:3px dashed rgba(0,0,0,.18);
      border-radius:16px;
      min-height:320px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
      font-weight:700;
      color:rgba(0,0,0,.45);
      user-select:none;
      transition: transform 120ms ease;
    }

    .side{
      background:#fff;
      border-radius:18px;
      padding:18px;
      box-shadow:0 10px 26px rgba(0,0,0,.06);
    }

    .question{
      font-size:20px;
      font-weight:800;
      margin:0 0 10px;
    }

    .btnRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:14px;
    }

    button{
      font-size:18px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.12);
      background:#fff;
      cursor:pointer;
    }

    button:active{ transform:scale(.99); }

    .hint{
      margin:10px 0 0;
      color:rgba(0,0,0,.55);
      font-size:14px;
      line-height:1.4;
    }
  </style>
</head>

<body>
  <!-- TOP FEEDBACK -->
  <div class="topbar">
    <img id="goodAnim" src="goed2.gif" alt="goed" />

    <div id="correctWrap">
      <div class="numberStage">
        <span id="correctNumber">0</span>
        <img id="marboticImg" src="marbotic5.png" alt="marbotic" />
        <img id="magicAnim" src="magic.gif" alt="magic" />
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="grid">
      <div class="scanvlak">
        <p class="scanTitle">Scanvlak</p>
        <div class="scanBox" id="scanBox">Plaats hier jouw spelelementen</div>
      </div>

      <div class="side">
        <p class="question">Kies het juiste antwoord</p>
        <div class="btnRow" id="answers"></div>
        <p class="hint">Demo, klik een fout antwoord en daarna het goede, dan zie je bovenin goed2, het juiste cijfer, marbotic fade in en magic erbovenop.</p>
      </div>
    </div>
  </div>

  <script>
    // Demo instellingen, vervang dit door jouw speldata
    const rightAnswer = 7;
    const options = [2, 5, 7, 9];

    const goodAnim = document.getElementById("goodAnim");
    const correctWrap = document.getElementById("correctWrap");
    const correctNumber = document.getElementById("correctNumber");
    const marboticImg = document.getElementById("marboticImg");
    const magicAnim = document.getElementById("magicAnim");
    const answers = document.getElementById("answers");
    const scanBox = document.getElementById("scanBox");

    // Preload voor soepel afspelen
    ["goed2.gif", "magic.gif", "marbotic5.png"].forEach(src => {
      const i = new Image();
      i.src = src;
    });

    function playMagicOnce(){
      magicAnim.style.display = "block";
      magicAnim.src = "magic.gif?v=" + Date.now(); // gif herstarten
      window.setTimeout(() => {
        magicAnim.style.display = "none";
      }, 900);
    }

    function showWrongFeedback(){
      scanBox.style.transform = "translateX(-3px)";
      window.setTimeout(() => scanBox.style.transform = "translateX(3px)", 80);
      window.setTimeout(() => scanBox.style.transform = "translateX(0px)", 160);
    }

    // Dit is de functie die jij in jouw spel aanroept bij een goed antwoord
    function showCorrectFeedback(n){
      goodAnim.style.display = "block";
      correctWrap.style.display = "flex";
      correctNumber.textContent = String(n);

      // marbotic alleen bij goed, langzaam infaden
      marboticImg.style.display = "block";
      marboticImg.classList.remove("is-on");
      marboticImg.style.opacity = "0";

      // Forceer een render, daarna pas class toevoegen voor de fade
      requestAnimationFrame(() => {
        marboticImg.classList.add("is-on");
      });

      // magic bovenop het cijfer, meteen afspelen
      playMagicOnce();

      // Optioneel, na een moment weer netjes verdwijnen
      window.setTimeout(() => {
        marboticImg.classList.remove("is-on"); // fade out
        window.setTimeout(() => {
          goodAnim.style.display = "none";
          marboticImg.style.display = "none";
          correctWrap.style.display = "none";
        }, 450);
      }, 1800);
    }

    // Demo knoppen
    options.forEach(n => {
      const b = document.createElement("button");
      b.textContent = n;
      b.addEventListener("click", () => {
        if(n === rightAnswer){
          showCorrectFeedback(rightAnswer);
        } else {
          showWrongFeedback();
        }
      });
      answers.appendChild(b);
    });

    // Tip voor jouw echte spel:
    // roep showCorrectFeedback(juisteCijfer) aan zodra je controleert dat het antwoord klopt
  </script>
</body>
</html>
